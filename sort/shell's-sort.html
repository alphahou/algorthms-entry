<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
	
	<script>
var cnt=0
		function draw(array,x,y){
			cnt++
			var canvas = document.createElement('canvas')
				count=document.createElement('div')
				ctx=canvas.getContext('2d')
				l=array.length
				gap=200/l
				w=150/l
				a=x+1||-1
				b=y+1||-1
				a-=1
				b-=1
			canvas.setAttribute('height','200')
			canvas.setAttribute('width','200')
			canvas.style.display='block'
			canvas.style.margin='auto'
			count.innerText=cnt
			count.style.textAlign='center'
			for (let i = 0; i < l; i++) {
				if(i!=a&&i!=b){
					ctx.fillStyle='pink'
				}
				else {
					ctx.fillStyle='black'
				}
				ctx.fillRect(0+gap*i,200,w,-array[i]*100)
			}
			document.body.appendChild(canvas)
			document.body.appendChild(count)
		}
		function sort(array){
			var h=1
			l=array.length
			
			while(h<l/3){
				h=h*3+1
			}
			while(h>=1){
				for (let i = h; i <l; i++) {
					for (let j = i ; j>=h&&(array[j]<array[j-h]); j-=h) {
						let temp=array[j]
						array[j]=array[j-h]
						array[j-h]=temp;
						
						draw(array,j,j-h)
					}

				}
				h=Math.floor(h/3)
			}
			return array
		}
		function createRandArray(length){
			var array=[]
			while(length>0){
				array.push(Math.random())
				length--
			}
			draw(array)
			return array
		}
		window.onload=function(){ 
				var arr=createRandArray(20)
				sort(arr) 
			} 

	</script>
</body>
</html>